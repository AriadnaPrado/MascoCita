<div class="container">

  <h2>Panel de Administración</h2>

  <!-- Mensaje mientras carga -->
  <div *ngIf="cargando" class="loading">
    Cargando turnos...
  </div>

  <!-- Mostrar error si ocurre -->
  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <!-- Tabla de turnos -->
  <table *ngIf="!cargando">
    <thead>
      <tr>
        <th>ID</th>
        <th>Cliente</th>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Servicio</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let t of turnos">
        <td>{{ t.id }}</td>
        <td>{{ t.idCliente ? t.idCliente : 'Sin asignar' }}</td>
        <td>{{ t.fecha }}</td>
        <td>{{ t.hora }}</td>
        <td>{{ t.servicio }}</td>

        <!-- Clase según estado -->
        <td>
          <span [class]="'estado ' + t.estado.toLowerCase()">
            {{ t.estado }}
          </span>
        </td>

        <td>
          <button 
            *ngIf="t.estado === 'Reservado'"
            (click)="confirmar(t)">
            Confirmar
          </button>

          <button 
            class="cancelar"
            *ngIf="t.estado !== 'Cancelado'"
            (click)="cancelar(t)">
            Cancelar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <hr />

  <!-- Crear nuevo turno -->
  <h3>Crear nuevo turno</h3>

  <form (ngSubmit)="crearTurno()" class="nuevo-turno-form">

    <label>Fecha:</label>
    <input type="date" [(ngModel)]="nuevoTurno.fecha" name="fecha" required />

    <label>Hora:</label>
    <input type="time" [(ngModel)]="nuevoTurno.hora" name="hora" required />

    <label>Servicio:</label>
    <input type="text" [(ngModel)]="nuevoTurno.servicio" name="servicio" required />

    <button type="submit">Crear turno</button>
  </form>

</div>
